<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="StorageDAO">
	
	<!-- 테이블스페이스 리스트 조회 -->
	<select id="getTablespaceList" parameterType="String" resultType="tablespace">
		SELECT tablespace_name "tablespaceName"
			, status "status"
			, contents "contents"
		FROM dba_tablespaces 
		<if test="keyword != null">
			WHERE tablespace_name LIKE '%${keyword}%'
		</if>
	</select>
	
	<!-- 데이터파일 리스트 조회 -->
	<select id="getDatafileList" parameterType="String" resultType="datafile">
		SELECT tablespace_name "tablespaceName"
			, file_name "fileName"
		FROM dba_data_files
		<if test="tablespaceName != null">
			WHERE tablespace_name = #{keyword}
		</if>
		UNION
		SELECT tablespace_name "tablespaceName"
			, file_name "fileName"
		FROM dba_temp_files
		<if test="tablespaceName != null">
			WHERE tablespace_name = #{keyword}
		</if>
	</select>
	
	<!-- 테이블스페이스 삭제 -->
	<delete id="deleteTablespace" parameterType="String">
		DROP TABLESPACE #{tablespaceName} INCLUDING CONTENTS AND DATAFILES
	</delete>
</mapper>